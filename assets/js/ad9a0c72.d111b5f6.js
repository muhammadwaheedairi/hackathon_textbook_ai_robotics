"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[8926],{8344:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module-1-robotic-nervous-system/week-2-ros-2-fundamentals/chapter-3-nodes-topics","title":"ROS 2 Nodes and Topics","description":"Overview","source":"@site/docs/module-1-robotic-nervous-system/week-2-ros-2-fundamentals/chapter-3-nodes-topics.md","sourceDirName":"module-1-robotic-nervous-system/week-2-ros-2-fundamentals","slug":"/module-1-robotic-nervous-system/week-2-ros-2-fundamentals/chapter-3-nodes-topics","permalink":"/hackathon_textbook_ai_robotics/docs/module-1-robotic-nervous-system/week-2-ros-2-fundamentals/chapter-3-nodes-topics","draft":false,"unlisted":false,"editUrl":"https://github.com/muhammadwaheedairi/hackathon_textbook_ai_robotics/edit/main/my-website/docs/module-1-robotic-nervous-system/week-2-ros-2-fundamentals/chapter-3-nodes-topics.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"ROS 2 Nodes and Topics","sidebar_label":"Chapter 3: Nodes & Topics","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 2: IMU Sensors","permalink":"/hackathon_textbook_ai_robotics/docs/module-1-robotic-nervous-system/week-1-introduction-to-physical-ai/chapter-2-lidar-imu-sensors"},"next":{"title":"Chapter 4: Services & Packages","permalink":"/hackathon_textbook_ai_robotics/docs/module-1-robotic-nervous-system/week-2-ros-2-fundamentals/chapter-4-services-packages"}}');var o=s(4848),t=s(8453);const r={title:"ROS 2 Nodes and Topics",sidebar_label:"Chapter 3: Nodes & Topics",sidebar_position:3},l="Chapter 3: ROS 2 Nodes and Topics",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"ROS 2 Nodes",id:"ros-2-nodes",level:2},{value:"Node Characteristics",id:"node-characteristics",level:3},{value:"Node Implementation in Python",id:"node-implementation-in-python",level:3},{value:"Node Lifecycle",id:"node-lifecycle",level:3},{value:"Node Management Commands",id:"node-management-commands",level:3},{value:"ROS 2 Topics and Publish-Subscribe Pattern",id:"ros-2-topics-and-publish-subscribe-pattern",level:2},{value:"Topic Communication",id:"topic-communication",level:3},{value:"Topic Architecture",id:"topic-architecture",level:3},{value:"Quality of Service (QoS) Policies",id:"quality-of-service-qos-policies",level:3},{value:"Common Topic Message Types",id:"common-topic-message-types",level:3},{value:"Topic Implementation in Python",id:"topic-implementation-in-python",level:3},{value:"Example with Custom QoS Settings",id:"example-with-custom-qos-settings",level:3},{value:"Topic Management Commands",id:"topic-management-commands",level:3},{value:"Code Examples",id:"code-examples",level:2},{value:"Creating a Basic ROS 2 Node",id:"creating-a-basic-ros-2-node",level:3},{value:"Publisher Node Example",id:"publisher-node-example",level:3},{value:"Subscriber Node Example",id:"subscriber-node-example",level:3},{value:"Summary",id:"summary",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"What&#39;s Next",id:"whats-next",level:2}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"chapter-3-ros-2-nodes-and-topics",children:"Chapter 3: ROS 2 Nodes and Topics"})}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(n.p,{children:"This chapter introduces the fundamental building blocks of ROS 2: nodes and topics. You'll learn how nodes serve as independent computational units and how topics enable asynchronous communication through the publish-subscribe pattern."}),"\n",(0,o.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,o.jsxs)(n.admonition,{title:"Learning Objectives",type:"info",children:[(0,o.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Define and create ROS 2 nodes for distributed computing"}),"\n",(0,o.jsx)(n.li,{children:"Understand the publish-subscribe communication pattern"}),"\n",(0,o.jsx)(n.li,{children:"Implement publishers and subscribers in Python"}),"\n",(0,o.jsx)(n.li,{children:"Configure Quality of Service (QoS) policies for topics"}),"\n"]})]}),"\n",(0,o.jsx)(n.h2,{id:"ros-2-nodes",children:"ROS 2 Nodes"}),"\n",(0,o.jsx)(n.p,{children:"A node is an executable that uses ROS 2 to communicate with other nodes. Nodes are the fundamental building blocks of a ROS 2 system. Each node runs independently and can communicate with other nodes through topics, services, or actions. Nodes encapsulate the computational units of a ROS 2 application and provide the interfaces (publishers, subscribers, services, etc.) that allow the node to interact with other nodes."}),"\n",(0,o.jsx)(n.h3,{id:"node-characteristics",children:"Node Characteristics"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Process-based"}),": Each node runs as a separate process, providing isolation and fault tolerance"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Communication hub"}),": Nodes serve as endpoints for ROS 2 communication, managing publishers, subscribers, services, and parameters"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Resource management"}),": Nodes manage their own resources including timers, callbacks, and internal state"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Modularity"}),": Nodes can be developed, tested, and deployed independently"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Naming"}),": Each node has a unique name within the ROS 2 graph that identifies it to other nodes"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Namespace support"}),": Nodes can be organized under namespaces for better organization"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"node-implementation-in-python",children:"Node Implementation in Python"}),"\n",(0,o.jsxs)(n.p,{children:["In Python, ROS 2 nodes are implemented by subclassing the ",(0,o.jsx)(n.code,{children:"rclpy.node.Node"})," class:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass MyNode(Node):\n    def __init__(self):\n        super().__init__('my_node_name')\n        self.get_logger().info('Node initialized successfully')\n"})}),"\n",(0,o.jsx)(n.h3,{id:"node-lifecycle",children:"Node Lifecycle"}),"\n",(0,o.jsx)(n.p,{children:"ROS 2 nodes follow a defined lifecycle that enables more sophisticated state management, especially for complex robotic applications:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Unconfigured (Primary State)"}),": Node created but not configured; only basic operations allowed"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Inactive (Secondary State)"}),": Node configured but not active; can communicate but doesn't perform main functions"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Active (Secondary State)"}),": Node is fully operational and performing its intended functions"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Finalized (Secondary State)"}),": Node is shutting down and cleaning up resources"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"The lifecycle system is optional and primarily used for more complex systems that need sophisticated state management."}),"\n",(0,o.jsx)(n.h3,{id:"node-management-commands",children:"Node Management Commands"}),"\n",(0,o.jsx)(n.p,{children:"Common command-line tools for working with nodes:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# List all active nodes\nros2 node list\n\n# Show information about a specific node\nros2 node info <node_name>\n"})}),"\n",(0,o.jsx)(n.h2,{id:"ros-2-topics-and-publish-subscribe-pattern",children:"ROS 2 Topics and Publish-Subscribe Pattern"}),"\n",(0,o.jsx)(n.p,{children:"Topics enable asynchronous communication between nodes using a publish-subscribe pattern. Publishers send messages to topics, and subscribers receive messages from topics. This decouples publishers and subscribers in time and space, allowing for flexible and scalable robot architectures."}),"\n",(0,o.jsx)(n.h3,{id:"topic-communication",children:"Topic Communication"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Decoupled"}),": Publishers and subscribers don't need to know about each other"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Asynchronous"}),": Messages are sent and received independently"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Broadcast"}),": One publisher can send to multiple subscribers"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Typed"}),": Each topic has a specific message type"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Named"}),": Topics have unique names that identify the data stream"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"QoS support"}),": Quality of Service policies can be configured for different reliability and performance needs"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"topic-architecture",children:"Topic Architecture"}),"\n",(0,o.jsx)(n.p,{children:"The publish-subscribe pattern works as follows:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"A publisher node creates a publisher and sends messages to a named topic"}),"\n",(0,o.jsx)(n.li,{children:"A subscriber node creates a subscription to the same named topic"}),"\n",(0,o.jsx)(n.li,{children:"The ROS 2 middleware (DDS) handles message delivery between publishers and subscribers"}),"\n",(0,o.jsx)(n.li,{children:"Multiple publishers can publish to the same topic, and multiple subscribers can subscribe to the same topic"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"quality-of-service-qos-policies",children:"Quality of Service (QoS) Policies"}),"\n",(0,o.jsx)(n.p,{children:"ROS 2 topics support various QoS policies that define how messages are delivered:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Reliability"}),": ",(0,o.jsx)(n.code,{children:"RELIABLE"})," (all messages delivered) or ",(0,o.jsx)(n.code,{children:"BEST_EFFORT"})," (try to deliver messages)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Durability"}),": ",(0,o.jsx)(n.code,{children:"TRANSIENT_LOCAL"})," (store messages for late-joining subscribers) or ",(0,o.jsx)(n.code,{children:"VOLATILE"})," (don't store messages)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"History"}),": ",(0,o.jsx)(n.code,{children:"KEEP_LAST"})," (store N most recent messages) or ",(0,o.jsx)(n.code,{children:"KEEP_ALL"})," (store all messages)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Depth"}),": Number of messages to store in history when using ",(0,o.jsx)(n.code,{children:"KEEP_LAST"})]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"common-topic-message-types",children:"Common Topic Message Types"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"std_msgs"}),": Basic data types (integers, floats, strings)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"sensor_msgs"}),": Sensor data (LIDAR, cameras, IMU)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"geometry_msgs"}),": Geometric data (poses, velocities, points)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"nav_msgs"}),": Navigation-related messages (paths, occupancy grids)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"action_msgs"}),": Action-related messages"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"builtin_interfaces"}),": Time and duration messages"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"topic-implementation-in-python",children:"Topic Implementation in Python"}),"\n",(0,o.jsx)(n.p,{children:"Here's how to implement publishers and subscribers in Python:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass TopicPublisherNode(Node):\n    def __init__(self):\n        super().__init__('topic_publisher')\n        self.publisher = self.create_publisher(String, 'topic_name', 10)\n        timer_period = 0.5\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'Hello World: {self.i}'\n        self.publisher.publish(msg)\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\n        self.i += 1\n\nclass TopicSubscriberNode(Node):\n    def __init__(self):\n        super().__init__('topic_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'topic_name',\n            self.listener_callback,\n            10\n        )\n        self.subscription\n\n    def listener_callback(self, msg):\n        self.get_logger().info(f'I heard: \"{msg.data}\"')\n"})}),"\n",(0,o.jsx)(n.h3,{id:"example-with-custom-qos-settings",children:"Example with Custom QoS Settings"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, ReliabilityPolicy, DurabilityPolicy\n\nclass QoSTopicNode(Node):\n    def __init__(self):\n        super().__init__('qos_topic_node')\n\n        qos_profile = QoSProfile(\n            depth=10,\n            reliability=ReliabilityPolicy.RELIABLE,\n            durability=DurabilityPolicy.VOLATILE\n        )\n\n        self.publisher = self.create_publisher(String, 'reliable_topic', qos_profile)\n"})}),"\n",(0,o.jsx)(n.h3,{id:"topic-management-commands",children:"Topic Management Commands"}),"\n",(0,o.jsx)(n.p,{children:"Common command-line tools for working with topics:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# List all active topics\nros2 topic list\n\n# Show information about a specific topic\nros2 topic info /topic_name\n\n# Echo messages from a topic\nros2 topic echo /topic_name std_msgs/msg/String\n\n# Publish a message to a topic\nros2 topic pub /topic_name std_msgs/msg/String \"data: 'Hello'\"\n\n# Show the type of a topic\nros2 topic type /topic_name\n"})}),"\n",(0,o.jsx)(n.h2,{id:"code-examples",children:"Code Examples"}),"\n",(0,o.jsx)(n.h3,{id:"creating-a-basic-ros-2-node",children:"Creating a Basic ROS 2 Node"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass BasicNode(Node):\n    def __init__(self):\n        super().__init__('basic_node')\n        self.get_logger().info('Basic Node initialized')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    basic_node = BasicNode()\n\n    try:\n        rclpy.spin(basic_node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        basic_node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,o.jsx)(n.h3,{id:"publisher-node-example",children:"Publisher Node Example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass PublisherNode(Node):\n    def __init__(self):\n        super().__init__('publisher_node')\n        self.publisher = self.create_publisher(String, 'topic_name', 10)\n        timer_period = 0.5\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n        self.get_logger().info('Publisher Node initialized')\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'Hello World: {self.i}'\n        self.publisher.publish(msg)\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    publisher_node = PublisherNode()\n\n    try:\n        rclpy.spin(publisher_node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        publisher_node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,o.jsx)(n.h3,{id:"subscriber-node-example",children:"Subscriber Node Example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass SubscriberNode(Node):\n    def __init__(self):\n        super().__init__('subscriber_node')\n        self.subscription = self.create_subscription(\n            String,\n            'topic_name',\n            self.listener_callback,\n            10)\n        self.subscription\n        self.get_logger().info('Subscriber Node initialized')\n\n    def listener_callback(self, msg):\n        self.get_logger().info(f'I heard: \"{msg.data}\"')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    subscriber_node = SubscriberNode()\n\n    try:\n        rclpy.spin(subscriber_node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        subscriber_node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,o.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,o.jsx)(n.p,{children:"ROS 2 nodes are independent computational units that communicate through topics using the publish-subscribe pattern. This architecture enables flexible, scalable, and modular robot systems where components can be developed and tested independently."}),"\n",(0,o.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,o.jsx)(n.admonition,{title:"Key Takeaways",type:"tip",children:(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Nodes are the fundamental building blocks of ROS 2 systems"}),"\n",(0,o.jsx)(n.li,{children:"Topics enable asynchronous, decoupled communication between nodes"}),"\n",(0,o.jsx)(n.li,{children:"QoS policies allow fine-tuning of message delivery characteristics"}),"\n",(0,o.jsx)(n.li,{children:"The publish-subscribe pattern supports one-to-many communication"}),"\n"]})}),"\n",(0,o.jsx)(n.h2,{id:"whats-next",children:"What's Next"}),"\n",(0,o.jsx)(n.p,{children:"In the next chapter, we'll explore ROS 2 services for synchronous request-response communication and learn how to organize code into packages for better project structure."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var i=s(6540);const o={},t=i.createContext(o);function r(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);